!function(l){"use strict";l.jCarousel.isImagesLoaded=function(t){var e=t.find("img"),i=e.length,n=0;return l.each(e,function(){(function(t){if(!t.complete)return!1;if(void 0!==t.naturalWidth&&0===t.naturalWidth)return!1;return!0})(this)&&n++}),n===i},l.jCarousel.plugin("jcarouselLazyLoading",{_options:{preventScroll:!0,preloader:null,waitFunction:function(e,i,t){var n=0,s=e.find("img[data-src],img[data-srcset],source[data-srcset],source[data-sizes]");s.toggleClass("non-transition",!!t),s.each(function(){var t=l(this),e=t.attr("data-src"),i=t.attr("data-srcset"),n=t.attr("data-sizes");t.addClass("loading"),t.attr("src",e).attr("srcset",i).attr("sizes",n).removeAttr("data-src").removeAttr("data-srcset").removeAttr("data-sizes"),"function"==typeof window.picturefill&&t.is("img")&&picturefill({reevaluate:!0,elements:[t[0]]})}),function t(){n++;l.jCarousel.isImagesLoaded(e)?(i(),s.removeClass("loading")):n<=100?setTimeout(t,100):(i(),s.removeClass("loading"))}()}},_loading:!1,_scrollPrevented:!1,_position:0,_init:function(){var r=this;this._instance=this.carousel().data("jcarousel"),this._element.on("jcarousel:reloadend.jcarouselLazyLoading",function(){r._reload()}).on("jcarousel:scroll.jcarouselLazyLoading",function(t,e,i,n){var s=r._position!==r._instance.list().position()[r._instance.lt];if(!r._loading&&!s&&r._options.preventScroll){var a=r._getNextVisibleSlides(i),o=function(){};r._scrollPrevented=r._loading=!0,l.isFunction(n)&&(o=n,n=!0),r._options.waitFunction(a,function(){r._scrollPrevented=!1,r._instance.scroll(i,n,function(){o(),r._loading=!1}),r._removePreloaders(a)},!0),t.preventDefault()}r._scrollPrevented&&t.preventDefault()}).on("jcarousel:scrollend.jcarouselLazyLoading",function(){var t=r._position!==r._instance.list().position()[r._instance.lt],e=r._instance.visible();!t&&r._options.preventScroll||r._options.waitFunction(e,function(){r._removePreloaders(e)})}).on("jcarousel:animateend.jcarouselLazyLoading",function(){r._position=r._instance.list().position()[r._instance.lt]})},_create:function(){this._reload()},_getNextVisibleSlides:function(t){var e,i,n,s,a,o=this._instance.clipping(),r=this._instance.items().length,l=0;for(s=this._getSlide(t),e=this._instance.dimension(s),i=r<=(a=(n=s).index())+1;e<o;)"circular"!==this._instance._options.wrap&&i?(0<l&&(l=0),l--):i=r<=a+ ++l+1,s=this._getSlide(a+l),e+=this._instance.dimension(s),n=n.add(s);return n},_getSlide:function(t){var e,i=l.jCarousel.parseTarget(t),n=this._instance.items().length;return i.relative?(e=this._instance.index(this._instance.target()),this._instance.items().eq((e+i.target)%n)):"number"==typeof i.target?this._instance.items().eq(i.target%n):i.target},_removePreloaders:function(t){if(this._options.preloader){var e=t.find(this._options.preloader);e.length&&e.detach()}},_destroy:function(){this._element.off(".jcarouselLazyLoading")},_reload:function(){var t=this,e=t._instance.visible();this._options.waitFunction(e,function(){t._removePreloaders(e)}),this._position=this._instance.list().position()[this._instance.lt]}})}(jQuery);